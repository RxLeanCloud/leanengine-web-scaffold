# 我眼中的 .NET

沉迷于 C# 许多年了，一直有很多不清不楚的概念困扰着我，虽然这门语言对新手友好，但是也就是这一点，让其语言的拥趸对这门语言颇有微词。

我从个人角度出发去试着描述一下这门语言的一些我个人至今都比较困惑的地方。

## 1. 对象在内存里到底长什么样儿？

问题的本质是:

> 所有的对象是不是都会被系统分配一个内置的 ID，然后根据将 id 以及对象的相关数据组成一个字典存入到内存管理器中，然后根据 这个id 可以直接读取这个对象的相关数据以及真正的物理地址，GC 在回收的时候只要告诉内存：我这边程序发现 id 为 1 的这个对象已经没用了，你帮我清理一下这个内存地址上对应的数据。

是如楼上说的这样么？如果不是，GC 是如何对内存进行管理操作的？它又如何定义一个对象的数据是不是在此时此刻可以被清除，并且还确保清楚之后，别的地方不会再去读取这些数据呢？


### 假设我是 CLR

执行如下代码的话：

```c#
var counrty = "China";
```

首先，作为 CLR，我定义一个 hashtable ，他负责存储对象的 id 和内存地址

1. 因为 counrty 声明的类型是 string，并且值为 "WuJun"，所以组装一个字典 

```json
{"name":"counrty","value":"China"}
```
2. 向内存申请并且存储值

```sh
memory get stack

```